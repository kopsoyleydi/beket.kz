<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="layout.html">
<div layout:fragment="content">
  <div class="row">
    <div class="col-6 mx-auto">
      <table class="table">
        <thead>
        <tr>
          <th scope="col">Departure</th>
          <th scope="col">Arrival</th>
          <th scope="col">Departure date</th>
          <th scope="col">Departure Station</th>
        </tr>
        </thead>
        <tbody id="list">
        </tbody>
      </table>
    </div>
    <script type="text/javascript">
      loadRoads();

      function loadRoads(){
        const httpRequest = new XMLHttpRequest();
        httpRequest.open("GET", "http://localhost:8888/roads/getRoadByFilter?departure=Almaty&arrival=Shymkent&date=2023-07-06", true);
        httpRequest.onreadystatechange = function () {
          if (httpRequest.readyState == XMLHttpRequest.DONE && httpRequest.status == 200) {
            let roadsList = JSON.parse(httpRequest.responseText);
            let content = "";
            for (let i = 0; i < roadsList.length; i++) {
              content += "<tr>";
              content += "<th>"+roadsList[i].departure.name+"</th>";
              content += "<th>"+roadsList[i].arrival.name+"</th>";
              content += "<th>"+roadsList[i].departure.stationId.stationName+"</th>";
              content += "<th>"+roadsList[i].departure_date+"</th>";
              content += "</tr>"
            }
            document.getElementById("list").innerHTML = content;
          }
        }
        httpRequest.send();
      }
    </script>
  </div>
</div>
</html>